<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>AcUtils: AcDepots.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="Doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Verizon.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AcUtils
   </div>
   <div id="projectbrief">A high performance abstraction layer for AccuRev</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="usergroup0.html"><span>Docs</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="group__acenum.html"><span>Enums</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AcDepots.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_ac_depots_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections.Generic;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Diagnostics;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.IO;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Linq;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_threading.html">Threading</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.<a class="code" href="namespace_system_1_1_threading.html">Threading</a>.<a class="code" href="namespace_system_1_1_threading_1_1_tasks.html">Tasks</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Xml.Linq;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_ac_utils.html">AcUtils</a></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;{</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">    #region enums</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keyword">public</span> <span class="keyword">enum</span> <a class="code" href="group__acenum.html#gad7d7bdcb365077a1537c1f62f262b678">CaseSensitivity</a> {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <a class="code" href="group__acenum.html#ggad7d7bdcb365077a1537c1f62f262b678a98fe7b114581ad03606cee6e8c1e2fa8">insensitive</a>,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <a class="code" href="group__acenum.html#ggad7d7bdcb365077a1537c1f62f262b678a7bdc8a923ea34af94c5d36604d0fb3dc">sensitive</a></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    };</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">    #endregion</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    [Serializable]</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    [DebuggerDisplay(<span class="stringliteral">&quot;{ToString(\&quot;lv\&quot;)}&quot;</span>)]</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html">   49</a></span>&#160;    <span class="keyword">public</span> sealed <span class="keyword">class </span><a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a> : IFormattable, IEquatable&lt;AcDepot&gt;, IComparable&lt;AcDepot&gt;, IComparable</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">        #region class variables</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">string</span> _name; <span class="comment">// depot name</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">int</span> _id; <span class="comment">// depot ID number</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">int</span> _slice; <span class="comment">// depot slice number</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> _exclusiveLocking; <span class="comment">// whether or not all workspaces created for this depot use exclusive file locking</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keyword">private</span> <a class="code" href="group__acenum.html#gad7d7bdcb365077a1537c1f62f262b678">CaseSensitivity</a> _case; <span class="comment">// whether the depot is case sensitive or insensitive</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> _dynamicOnly; <span class="comment">// true if request is for dynamic streams only</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> _includeHidden; <span class="comment">// true if removed streams should be included in the list</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keyword">internal</span> <a class="code" href="class_ac_utils_1_1_ac_streams.html">AcStreams</a> _streams; <span class="comment">// list of streams in this depot as per constructor parameters</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        [NonSerialized] <span class="keyword">private</span> Task&lt;MultiValueDictionary&lt;int, int&gt;&gt; _hierarchy; <span class="comment">// [parent,children]</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        [NonSerialized] <span class="keyword">private</span> <span class="keywordtype">object</span> _hierSync = null;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        [NonSerialized] <span class="keyword">private</span> <span class="keywordtype">bool</span> _hierInit;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">        #region object construction:</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keyword">internal</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#ac66b547b57c63da9b32e90ff8f9f2018">AcDepot</a>(<span class="keywordtype">bool</span> dynamicOnly, <span class="keywordtype">bool</span> includeHidden)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            _dynamicOnly = dynamicOnly;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            _includeHidden = includeHidden;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#a12486c4a14141fc2edeec47d28dcc297">   86</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a12486c4a14141fc2edeec47d28dcc297">AcDepot</a>(<span class="keywordtype">string</span> name, <span class="keywordtype">bool</span> dynamicOnly = <span class="keyword">false</span>, <span class="keywordtype">bool</span> includeHidden = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            : this(dynamicOnly, includeHidden)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            _name = name;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#a929107cbae2629f77df986d75626dbcf">   99</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a929107cbae2629f77df986d75626dbcf">AcDepot</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">bool</span> dynamicOnly = <span class="keyword">false</span>, <span class="keywordtype">bool</span> includeHidden = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            : this(dynamicOnly, includeHidden)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            _id = id;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#ab6e664e58d0706313045a9948534e7f4">  114</a></span>&#160;        <span class="keyword">public</span> async Task&lt;bool&gt; <a class="code" href="class_ac_utils_1_1_ac_depot.html#ab6e664e58d0706313045a9948534e7f4">initAsync</a>()</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordtype">bool</span> ret = <span class="keyword">false</span>; <span class="comment">// assume failure</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_result.html">AcResult</a> r = await <a class="code" href="class_ac_utils_1_1_ac_command.html">AcCommand</a>.<a class="code" href="class_ac_utils_1_1_ac_command.html#aec181b83848526414ef5b5cbcc336421">runAsync</a>(<span class="stringliteral">&quot;show -fx depots&quot;</span>).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <span class="keywordflow">if</span> (r != null &amp;&amp; r.<a class="code" href="class_ac_utils_1_1_ac_result.html#afddbfb131e5698b41c9164685a99125b">RetVal</a> == 0)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                    XElement xml = XElement.Parse(r.<a class="code" href="class_ac_utils_1_1_ac_result.html#a333607bff557c608174c541a841105a8">CmdResult</a>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                    IEnumerable&lt;XElement&gt; filter = null;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    <span class="keywordflow">if</span> (_id &gt; 0)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                        filter = <a class="code" href="group__acenum.html#gga2149004df4de6f7f8763b1c46d4ade17ad98a07f84921b24ee30f86fd8cd85c3c">from</a> element in xml.Descendants(<span class="stringliteral">&quot;Element&quot;</span>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                 where (<span class="keywordtype">int</span>)element.Attribute(<span class="stringliteral">&quot;Number&quot;</span>) == _id</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                 select element;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                        filter = <a class="code" href="group__acenum.html#gga2149004df4de6f7f8763b1c46d4ade17ad98a07f84921b24ee30f86fd8cd85c3c">from</a> element in xml.Descendants(<span class="stringliteral">&quot;Element&quot;</span>)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                 where String.Equals((<span class="keywordtype">string</span>)element.Attribute(<span class="stringliteral">&quot;Name&quot;</span>), _name)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                 select element;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                    XElement e = filter.SingleOrDefault();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    <span class="keywordflow">if</span> (e != null)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                    {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                        <a class="code" href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">ID</a> = (int)e.Attribute(<span class="stringliteral">&quot;Number&quot;</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                        <a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a> = (string)e.Attribute(<span class="stringliteral">&quot;Name&quot;</span>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                        <a class="code" href="class_ac_utils_1_1_ac_depot.html#a77cff1bf98ddb52e03de16761862e7dc">Slice</a> = (int)e.Attribute(<span class="stringliteral">&quot;Slice&quot;</span>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                        <a class="code" href="class_ac_utils_1_1_ac_depot.html#a9c5f16b549c939a2f69609e734b16279">ExclusiveLocking</a> = (bool)e.Attribute(<span class="stringliteral">&quot;exclusiveLocking&quot;</span>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                        <span class="keywordtype">string</span> temp = (string)e.Attribute(<span class="stringliteral">&quot;case&quot;</span>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                        <a class="code" href="class_ac_utils_1_1_ac_depot.html#a530cc9e64207dd127e5c53441a814fe4">Case</a> = (<a class="code" href="group__acenum.html#gad7d7bdcb365077a1537c1f62f262b678">CaseSensitivity</a>)Enum.Parse(typeof(<a class="code" href="group__acenum.html#gad7d7bdcb365077a1537c1f62f262b678">CaseSensitivity</a>), temp);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        _streams = <span class="keyword">new</span> <a class="code" href="class_ac_utils_1_1_ac_streams.html">AcStreams</a>(_dynamicOnly, _includeHidden);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                        ret = await _streams.<a class="code" href="class_ac_utils_1_1_ac_streams.html#af7282977525827980a4ef540514d3176">initAsync</a>(<span class="keyword">this</span>, <a class="code" href="class_ac_utils_1_1_ac_depot.html#ac4eaf2a4ae0072629a1d65c43e5cf15e">listFile</a>()).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">catch</span> (<a class="code" href="class_ac_utils_1_1_ac_utils_exception.html">AcUtilsException</a> ecx)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_debug.html">AcDebug</a>.<a class="code" href="class_ac_utils_1_1_ac_debug.html#a71e088f7b33d0873e1b1bca7443faa72">Log</a>($<span class="stringliteral">&quot;AcUtilsException caught and logged in AcDepot.initAsync{Environment.NewLine}{ecx.Message}&quot;</span>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keywordflow">catch</span> (Exception ecx)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_debug.html">AcDebug</a>.<a class="code" href="class_ac_utils_1_1_ac_debug.html#a71e088f7b33d0873e1b1bca7443faa72">Log</a>($<span class="stringliteral">&quot;Exception caught and logged in AcDepot.initAsync{Environment.NewLine}{ecx.Message}&quot;</span>);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">        #region Equality comparison</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#af0c833757fbeb79c6e8a5f9627f145ea">Equals</a>(<a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a> other)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keywordflow">if</span> (ReferenceEquals(other, null)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">if</span> (ReferenceEquals(<span class="keyword">this</span>, other)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">ID</a> == other.<a class="code" href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">ID</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#aec3195727c05a020fe600be388720ea0">  183</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#aec3195727c05a020fe600be388720ea0">Equals</a>(<span class="keywordtype">object</span> other)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">if</span> (ReferenceEquals(other, null)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">if</span> (ReferenceEquals(<span class="keyword">this</span>, other)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">if</span> (GetType() != other.GetType()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">return</span> this.<a class="code" href="class_ac_utils_1_1_ac_depot.html#af0c833757fbeb79c6e8a5f9627f145ea">Equals</a>(other as <a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#adbc344620c33f17dfedacd62aff79fa8">  195</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">int</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#adbc344620c33f17dfedacd62aff79fa8">GetHashCode</a>()</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">ID</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">        #region Order comparison</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#a9faf6338d8993711bf05e5b0c73bb7f0">  211</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a9faf6338d8993711bf05e5b0c73bb7f0">CompareTo</a>(<a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a> other)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a>.ReferenceEquals(<span class="keyword">this</span>, other))</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                result = 0;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                result = String.Compare(<a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>, other.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#ace116750ec9ad84b04f932b96c60cc50">  228</a></span>&#160;        <span class="keywordtype">int</span> IComparable.CompareTo(<span class="keywordtype">object</span> other)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="keywordflow">if</span> (!(other is <a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a>))</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Argument is not an AcDepot&quot;</span>, <span class="stringliteral">&quot;other&quot;</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            AcDepot o = (<a class="code" href="class_ac_utils_1_1_ac_depot.html#ac66b547b57c63da9b32e90ff8f9f2018">AcDepot</a>)other;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keywordflow">return</span> this.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a9faf6338d8993711bf05e5b0c73bb7f0">CompareTo</a>(o);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">ID</a></div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">  242</a></span>&#160;        {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> _id; }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keyword">internal</span> set { _id = value; }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a></div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">  251</a></span>&#160;        {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> _name ?? String.Empty; }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keyword">internal</span> set { _name = value; }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a77cff1bf98ddb52e03de16761862e7dc">Slice</a></div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#a77cff1bf98ddb52e03de16761862e7dc">  260</a></span>&#160;        {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> _slice; }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keyword">internal</span> set { _slice = value; }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a9c5f16b549c939a2f69609e734b16279">ExclusiveLocking</a></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#a9c5f16b549c939a2f69609e734b16279">  269</a></span>&#160;        {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> _exclusiveLocking; }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keyword">internal</span> set { _exclusiveLocking = value; }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keyword">public</span> <a class="code" href="group__acenum.html#gad7d7bdcb365077a1537c1f62f262b678">CaseSensitivity</a> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a530cc9e64207dd127e5c53441a814fe4">Case</a></div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#a530cc9e64207dd127e5c53441a814fe4">  278</a></span>&#160;        {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> _case; }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keyword">internal</span> set { _case = value; }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keyword">public</span> IEnumerable&lt;AcStream&gt; <a class="code" href="class_ac_utils_1_1_ac_depot.html#ab8a490d7d294fa7c5b75c6942761e07d">Streams</a></div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#ab8a490d7d294fa7c5b75c6942761e07d">  287</a></span>&#160;        {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> _streams; }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#afb7282050197177270a60a748b38603a">  296</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> <a class="code" href="class_ac_utils_1_1_ac_depot.html#afb7282050197177270a60a748b38603a">getStream</a>(<span class="keywordtype">string</span> name)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b">stream</a> = null;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> s <span class="keywordflow">in</span> _streams)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <span class="keywordflow">if</span> (String.Equals(s.<a class="code" href="class_ac_utils_1_1_ac_stream.html#ad016e45ed7fd9b39301a9885d2f37920">Name</a>, name))</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                    <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b">stream</a> = s;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b">stream</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#ab0a806c01df4c42a83a65fbbb5a4e6e9">  316</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> <a class="code" href="class_ac_utils_1_1_ac_depot.html#ab0a806c01df4c42a83a65fbbb5a4e6e9">getStream</a>(<span class="keywordtype">int</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">ID</a>)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b">stream</a> = null;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">if</span> (ID &gt;= 1)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="keywordflow">foreach</span> (<a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> s <span class="keywordflow">in</span> _streams)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                    <span class="keywordflow">if</span> (s.<a class="code" href="class_ac_utils_1_1_ac_stream.html#adaa63817bd2212ac1657c78452e3b897">ID</a> == ID)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                        stream = s;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b">stream</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#ae837dfeaa76f2aa4f3f75b79681c7c30">  339</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> <a class="code" href="class_ac_utils_1_1_ac_depot.html#ae837dfeaa76f2aa4f3f75b79681c7c30">getBasis</a>(<span class="keywordtype">string</span> name)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> basis = null;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> s <span class="keywordflow">in</span> _streams)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                <span class="keywordflow">if</span> (String.Equals(s.<a class="code" href="class_ac_utils_1_1_ac_stream.html#ad016e45ed7fd9b39301a9885d2f37920">Name</a>, name))</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                    basis = <a class="code" href="class_ac_utils_1_1_ac_depot.html#afb7282050197177270a60a748b38603a">getStream</a>(s.<a class="code" href="class_ac_utils_1_1_ac_stream.html#a88ca51eaf71bd060c1477d96c5b54afc">BasisID</a>);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="keywordflow">return</span> basis;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#a5b7875bed1ad4626eabb5595016636e7">  359</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a5b7875bed1ad4626eabb5595016636e7">getBasis</a>(<span class="keywordtype">int</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">ID</a>)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> basis = null;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">if</span> (ID &gt; 1) <span class="comment">// ignore root since it has no parent</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <span class="keywordflow">foreach</span> (<a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> s <span class="keywordflow">in</span> _streams)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    <span class="keywordflow">if</span> (s.<a class="code" href="class_ac_utils_1_1_ac_stream.html#adaa63817bd2212ac1657c78452e3b897">ID</a> == ID)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                        basis = <a class="code" href="class_ac_utils_1_1_ac_depot.html#afb7282050197177270a60a748b38603a">getStream</a>(s.<a class="code" href="class_ac_utils_1_1_ac_stream.html#a88ca51eaf71bd060c1477d96c5b54afc">BasisID</a>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">return</span> basis;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#ac95dbd9ca47697160d2136639bc9bf76">  398</a></span>&#160;        <span class="keyword">public</span> async Task&lt;bool&gt; <a class="code" href="class_ac_utils_1_1_ac_depot.html#ac95dbd9ca47697160d2136639bc9bf76">forStreamAndAllChildrenAsync</a>(<a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b">stream</a>, Action&lt;AcStream&gt; cb, <span class="keywordtype">bool</span> includeWSpaces = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            cb(stream);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            var children = await <a class="code" href="class_ac_utils_1_1_ac_depot.html#a92081ed2e281370ec2b7d7a8fa886060">getChildrenAsync</a>(stream, includeWSpaces).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">if</span> (children == null) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//  operation failed, check log file</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordflow">if</span> (children.Item1 == null) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// ..</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="keywordflow">if</span> (children.Item1 == <span class="keyword">true</span>) <span class="comment">// if children exist</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                <span class="keywordflow">foreach</span> (<a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> child <span class="keywordflow">in</span> children.Item2)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                    await <a class="code" href="class_ac_utils_1_1_ac_depot.html#ac95dbd9ca47697160d2136639bc9bf76">forStreamAndAllChildrenAsync</a>(child, cb, includeWSpaces).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#a92081ed2e281370ec2b7d7a8fa886060">  440</a></span>&#160;        <span class="keyword">public</span> async Task&lt;Tuple&lt;bool?, IList&lt;AcStream&gt;&gt;&gt; <a class="code" href="class_ac_utils_1_1_ac_depot.html#a92081ed2e281370ec2b7d7a8fa886060">getChildrenAsync</a>(<a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b">stream</a>, <span class="keywordtype">bool</span> includeWSpaces = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            IList&lt;AcStream&gt; children = null;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <span class="keywordflow">if</span> (stream.<a class="code" href="class_ac_utils_1_1_ac_stream.html#a846da160261ffc6879547453dbde2a76">Type</a> == <a class="code" href="group__acenum.html#ga0a9d168d367dad9bab253eafa49aae77">StreamType</a>.workspace)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                <span class="keywordflow">return</span> Tuple.Create((<span class="keywordtype">bool</span>?)<span class="keyword">false</span>, children); <span class="comment">// workspaces don&#39;t have children</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordtype">bool</span>? ret = null;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <span class="comment">// thread safe one-time stream hierarchy initialization</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="comment">// see &quot;C# Lazy Initialization &amp;&amp; Race-to-initialize&quot; http://stackoverflow.com/questions/11555755/c-sharp-lazy-initialization-race-to-initialize</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            await LazyInitializer.EnsureInitialized(ref _hierarchy, ref _hierInit, ref _hierSync, </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                async () =&gt; await <a class="code" href="class_ac_utils_1_1_ac_depot.html#a1b7edc65ccd1ad8487e64e56568f5219">getHierarchyAsync</a>(includeWSpaces).ConfigureAwait(<span class="keyword">false</span>)).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">if</span> (_hierarchy == null)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                <span class="keywordflow">return</span> Tuple.Create(ret, children); <span class="comment">// initialization failed, check log file</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            IReadOnlyCollection&lt;int&gt; list = null;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            ret = _hierarchy.Result.TryGetValue(stream.<a class="code" href="class_ac_utils_1_1_ac_stream.html#adaa63817bd2212ac1657c78452e3b897">ID</a>, out list);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="keywordflow">if</span> (ret == <span class="keyword">true</span>)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                children = <span class="keyword">new</span> List&lt;AcStream&gt;(list.Count);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                <span class="keywordflow">foreach</span> (<span class="keywordtype">int</span> <span class="keywordtype">id</span> <span class="keywordflow">in</span> list)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                    <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> child = <a class="code" href="class_ac_utils_1_1_ac_depot.html#afb7282050197177270a60a748b38603a">getStream</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                    children.Add(child);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">return</span> Tuple.Create(ret, children);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#a1b7edc65ccd1ad8487e64e56568f5219">  485</a></span>&#160;        <span class="keyword">private</span> async Task&lt;MultiValueDictionary&lt;int, int&gt;&gt; <a class="code" href="class_ac_utils_1_1_ac_depot.html#a1b7edc65ccd1ad8487e64e56568f5219">getHierarchyAsync</a>(<span class="keywordtype">bool</span> includeWSpaces = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            MultiValueDictionary&lt;int, int&gt; hierarchy = null;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_result.html">AcResult</a> r = await <a class="code" href="class_ac_utils_1_1_ac_command.html">AcCommand</a>.<a class="code" href="class_ac_utils_1_1_ac_command.html#aec181b83848526414ef5b5cbcc336421">runAsync</a>($<span class="stringliteral">@&quot;show -p &quot;&quot;{this}&quot;&quot; {(_includeHidden ? &quot;</span> -fix<span class="stringliteral">&quot; : &quot;</span> -fx<span class="stringliteral">&quot;)} -s 1 -r streams&quot;</span>)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    .ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <span class="keywordflow">if</span> (r != null &amp;&amp; r.<a class="code" href="class_ac_utils_1_1_ac_result.html#afddbfb131e5698b41c9164685a99125b">RetVal</a> == 0) <span class="comment">// if command succeeded</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                    XElement xml = XElement.Parse(r.<a class="code" href="class_ac_utils_1_1_ac_result.html#a333607bff557c608174c541a841105a8">CmdResult</a>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                    IEnumerable&lt;XElement&gt; filter;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                    <span class="keywordflow">if</span> (includeWSpaces)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                        filter = <a class="code" href="group__acenum.html#gga2149004df4de6f7f8763b1c46d4ade17ad98a07f84921b24ee30f86fd8cd85c3c">from</a> s in xml.Descendants(<span class="stringliteral">&quot;stream&quot;</span>)</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                 select s;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                        filter = <a class="code" href="group__acenum.html#gga2149004df4de6f7f8763b1c46d4ade17ad98a07f84921b24ee30f86fd8cd85c3c">from</a> s in xml.Descendants(<span class="stringliteral">&quot;stream&quot;</span>)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                                 where !String.Equals((<span class="keywordtype">string</span>)s.Attribute(<span class="stringliteral">&quot;type&quot;</span>), <span class="stringliteral">&quot;workspace&quot;</span>) <span class="comment">// all except workspaces</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                 select s;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                    <span class="keywordtype">int</span> capacity = filter.Count();</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                    hierarchy = <span class="keyword">new</span> MultiValueDictionary&lt;int, int&gt;(capacity);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    <span class="keywordflow">foreach</span> (XElement e <span class="keywordflow">in</span> filter)</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                    {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                        <span class="comment">// XML attribute basisStreamNumber does not exist in the case of root streams</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                        <span class="keywordtype">int</span> parent = (<span class="keywordtype">int</span>?)e.Attribute(<span class="stringliteral">&quot;basisStreamNumber&quot;</span>) ?? -1;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                        <span class="keywordtype">int</span> child = (int)e.Attribute(<span class="stringliteral">&quot;streamNumber&quot;</span>);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                        hierarchy.Add(parent, child);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                    }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="keywordflow">catch</span> (<a class="code" href="class_ac_utils_1_1_ac_utils_exception.html">AcUtilsException</a> ecx)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_debug.html">AcDebug</a>.<a class="code" href="class_ac_utils_1_1_ac_debug.html#a71e088f7b33d0873e1b1bca7443faa72">Log</a>($<span class="stringliteral">&quot;AcUtilsException caught and logged in AcDepot.getHierarchyAsync{Environment.NewLine}{ecx.Message}&quot;</span>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                hierarchy = null;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="keywordflow">catch</span> (Exception ecx)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_debug.html">AcDebug</a>.<a class="code" href="class_ac_utils_1_1_ac_debug.html#a71e088f7b33d0873e1b1bca7443faa72">Log</a>($<span class="stringliteral">&quot;Exception caught and logged in AcDepot.getHierarchyAsync{Environment.NewLine}{ecx.Message}&quot;</span>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                hierarchy = null;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="keywordflow">return</span> hierarchy;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depot.html#ac4eaf2a4ae0072629a1d65c43e5cf15e">  561</a></span>&#160;        <span class="keyword">internal</span> <span class="keywordtype">string</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#ac4eaf2a4ae0072629a1d65c43e5cf15e">listFile</a>()</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="keywordtype">string</span> listfile = null;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                <span class="keywordtype">string</span> appdata = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                <span class="keywordtype">string</span> actools = Path.Combine(appdata, <span class="stringliteral">&quot;AcTools&quot;</span>);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                <span class="keywordtype">string</span> exeroot = String.Empty;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                <span class="keyword">using</span> (Process currentProcess = Process.GetCurrentProcess())</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                    ProcessModule pm = currentProcess.MainModule;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                    exeroot = Path.GetFileNameWithoutExtension(pm.ModuleName);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                <span class="keywordtype">string</span> progfolder = Path.Combine(actools, exeroot);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                <span class="keywordtype">string</span> temp = Path.Combine(progfolder, <a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="keywordtype">string</span> file = Path.ChangeExtension(temp, <span class="stringliteral">&quot;streams&quot;</span>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                <span class="keywordflow">if</span> (File.Exists(file))</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                    listfile = file;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="keywordflow">catch</span> (Exception ecx)</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_debug.html">AcDebug</a>.<a class="code" href="class_ac_utils_1_1_ac_debug.html#a71e088f7b33d0873e1b1bca7443faa72">Log</a>($<span class="stringliteral">&quot;Exception caught and logged in AcDepot.listFile{Environment.NewLine}{ecx.Message}&quot;</span>);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordflow">return</span> listfile;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="preprocessor">        #region ToString</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> ToString(<span class="keywordtype">string</span> format, IFormatProvider provider)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keywordflow">if</span> (provider != null)</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                ICustomFormatter fmt = provider.GetFormat(this.GetType()) as ICustomFormatter;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                <span class="keywordflow">if</span> (fmt != null)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                    <span class="keywordflow">return</span> fmt.Format(format, <span class="keyword">this</span>, provider);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="keywordflow">if</span> (String.IsNullOrEmpty(format))</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                format = <span class="stringliteral">&quot;G&quot;</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <span class="keywordflow">switch</span> (format.ToUpperInvariant())</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&quot;G&quot;</span>: <span class="comment">// Depot name (default when not using a format specifier).</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>; <span class="comment">// general format should be short since it can be called by anything</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&quot;LV&quot;</span>: <span class="comment">// long version (verbose)</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    <span class="keywordtype">string</span> <a class="code" href="group__acenum.html#gga3164dabd0d78a5482aea218fa9154669a1cb251ec0d568de6a929b520c4aed8d1">text</a> = String.Format(<span class="stringliteral">&quot;{0} ({1}), slice {2}, {3}{4}&quot;</span>,</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                        <a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>, <a class="code" href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">ID</a>, <a class="code" href="class_ac_utils_1_1_ac_depot.html#a77cff1bf98ddb52e03de16761862e7dc">Slice</a>, <a class="code" href="class_ac_utils_1_1_ac_depot.html#a530cc9e64207dd127e5c53441a814fe4">Case</a>, <a class="code" href="class_ac_utils_1_1_ac_depot.html#a9c5f16b549c939a2f69609e734b16279">ExclusiveLocking</a> ? <span class="stringliteral">&quot;, exclusive locking&quot;</span> : String.Empty);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__acenum.html#gga3164dabd0d78a5482aea218fa9154669a1cb251ec0d568de6a929b520c4aed8d1">text</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&quot;I&quot;</span>: <span class="comment">// depot ID number</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">ID</a>.ToString();</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&quot;S&quot;</span>: <span class="comment">// depot&#39;s slice number</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a77cff1bf98ddb52e03de16761862e7dc">Slice</a>.ToString();</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&quot;E&quot;</span>: <span class="comment">// exclusive locking status</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a9c5f16b549c939a2f69609e734b16279">ExclusiveLocking</a>.ToString();</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&quot;C&quot;</span>: <span class="comment">// whether the depot is case sensitive or insensitive</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a530cc9e64207dd127e5c53441a814fe4">Case</a>.ToString();</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> FormatException($<span class="stringliteral">&quot;The {format} format string is not supported.&quot;</span>);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <span class="comment">// Calls ToString(string, IFormatProvider) version with a null IFormatProvider argument.</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a0bd129aac82e38a2d05a9d16da8ab259">ToString</a>(<span class="keywordtype">string</span> format)</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a0bd129aac82e38a2d05a9d16da8ab259">ToString</a>(format, null);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="comment">// Calls ToString(string, IFormatProvider) version with the general format and a null IFormatProvider argument.</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a0bd129aac82e38a2d05a9d16da8ab259">ToString</a>()</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html#a0bd129aac82e38a2d05a9d16da8ab259">ToString</a>(<span class="stringliteral">&quot;G&quot;</span>, null);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="preprocessor">        #endregion ToString</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    [Serializable]</div>
<div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depots.html">  658</a></span>&#160;    <span class="keyword">public</span> sealed <span class="keyword">class </span><a class="code" href="class_ac_utils_1_1_ac_depots.html">AcDepots</a> : List&lt;AcDepot&gt;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="preprocessor">        #region class variables</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_ac_utils_1_1_ac_permissions.html">AcPermissions</a> _permissions;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        [NonSerialized] <span class="keyword">private</span> Task&lt;bool&gt; _depotPermObj;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        [NonSerialized] <span class="keyword">private</span> <span class="keywordtype">object</span> _permSync = null;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        [NonSerialized] <span class="keyword">private</span> <span class="keywordtype">bool</span> _permInit;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> _dynamicOnly; <span class="comment">// true if request is for dynamic streams only</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> _includeHidden; <span class="comment">// true if removed streams should be included in the list</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        [NonSerialized] <span class="keyword">private</span> readonly <span class="keywordtype">object</span> _locker = <span class="keyword">new</span> object(); <span class="comment">// token for lock keyword scope</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        [NonSerialized] <span class="keyword">private</span> <span class="keywordtype">int</span> _counter; <span class="comment">// used to report initialization progress back to the caller</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="preprocessor">        #region object construction:</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depots.html#a047429104b79c593e9880442ffe6863b">  688</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_ac_utils_1_1_ac_depots.html#a047429104b79c593e9880442ffe6863b">AcDepots</a>(<span class="keywordtype">bool</span> dynamicOnly = <span class="keyword">false</span>, <span class="keywordtype">bool</span> includeHidden = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            _dynamicOnly = dynamicOnly;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            _includeHidden = includeHidden;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depots.html#aefd78501e6a91238cdc7274c6aa985d5">  750</a></span>&#160;        <span class="keyword">public</span> async Task&lt;bool&gt; <a class="code" href="class_ac_utils_1_1_ac_depots.html#aefd78501e6a91238cdc7274c6aa985d5">initAsync</a>(<a class="code" href="class_ac_utils_1_1_depots_collection.html">DepotsCollection</a> depotsCol = null, IProgress&lt;int&gt; progress = null)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="keywordtype">bool</span> ret = <span class="keyword">false</span>; <span class="comment">// assume failure</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_result.html">AcResult</a> r = await <a class="code" href="class_ac_utils_1_1_ac_command.html">AcCommand</a>.<a class="code" href="class_ac_utils_1_1_ac_command.html#aec181b83848526414ef5b5cbcc336421">runAsync</a>(<span class="stringliteral">&quot;show -fx depots&quot;</span>).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                <span class="keywordflow">if</span> (r != null &amp;&amp; r.<a class="code" href="class_ac_utils_1_1_ac_result.html#afddbfb131e5698b41c9164685a99125b">RetVal</a> == 0)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                    XElement xml = XElement.Parse(r.<a class="code" href="class_ac_utils_1_1_ac_result.html#a333607bff557c608174c541a841105a8">CmdResult</a>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                    IEnumerable&lt;XElement&gt; query = null;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                    <span class="keywordflow">if</span> (depotsCol == null)</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                        query = <a class="code" href="group__acenum.html#gga2149004df4de6f7f8763b1c46d4ade17ad98a07f84921b24ee30f86fd8cd85c3c">from</a> e in xml.Descendants(<span class="stringliteral">&quot;Element&quot;</span>) select e;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                        query = <a class="code" href="group__acenum.html#gga2149004df4de6f7f8763b1c46d4ade17ad98a07f84921b24ee30f86fd8cd85c3c">from</a> e in xml.Descendants(<span class="stringliteral">&quot;Element&quot;</span>)</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                                where depotsCol.OfType&lt;<a class="code" href="class_ac_utils_1_1_depot_element.html">DepotElement</a>&gt;().Any(de =&gt; String.Equals(de.Depot, (<span class="keywordtype">string</span>)e.Attribute(<span class="stringliteral">&quot;Name&quot;</span>)))</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                                select e;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                    <span class="keywordtype">int</span> num = query.Count();</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                    List&lt;Task&lt;bool&gt;&gt; tasks = <span class="keyword">new</span> List&lt;Task&lt;bool&gt;&gt;(num);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                    Func&lt;Task&lt;bool&gt;, <span class="keywordtype">bool</span>&gt; cf = t =&gt;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                    {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                        <span class="keywordtype">bool</span> res = t.Result;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                        <span class="keywordflow">if</span> (res &amp;&amp; progress != null) progress.Report(Interlocked.Increment(ref _counter));</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                        <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                    };</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                    <span class="keywordflow">foreach</span> (XElement e <span class="keywordflow">in</span> query)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                        <a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a> <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6fa6f13b876f224fb5d11c729c36a871540">depot</a> = <span class="keyword">new</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a>(_dynamicOnly, _includeHidden);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                        depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">ID</a> = (int)e.Attribute(<span class="stringliteral">&quot;Number&quot;</span>);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                        depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a> = (string)e.Attribute(<span class="stringliteral">&quot;Name&quot;</span>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                        depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a77cff1bf98ddb52e03de16761862e7dc">Slice</a> = (int)e.Attribute(<span class="stringliteral">&quot;Slice&quot;</span>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                        depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a9c5f16b549c939a2f69609e734b16279">ExclusiveLocking</a> = (bool)e.Attribute(<span class="stringliteral">&quot;exclusiveLocking&quot;</span>);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                        <span class="keywordtype">string</span> temp = (string)e.Attribute(<span class="stringliteral">&quot;case&quot;</span>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                        depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a530cc9e64207dd127e5c53441a814fe4">Case</a> = (<a class="code" href="group__acenum.html#gad7d7bdcb365077a1537c1f62f262b678">CaseSensitivity</a>)Enum.Parse(typeof(<a class="code" href="group__acenum.html#gad7d7bdcb365077a1537c1f62f262b678">CaseSensitivity</a>), temp);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                        depot._streams = <span class="keyword">new</span> <a class="code" href="class_ac_utils_1_1_ac_streams.html">AcStreams</a>(_dynamicOnly, _includeHidden);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                        lock (_locker) { Add(depot); }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                        Task&lt;bool&gt; t = depot._streams.<a class="code" href="class_ac_utils_1_1_ac_streams.html#af7282977525827980a4ef540514d3176">initAsync</a>(depot, depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#ac4eaf2a4ae0072629a1d65c43e5cf15e">listFile</a>()).ContinueWith(cf);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                        tasks.Add(t);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                    }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                    <span class="keywordtype">bool</span>[] arr = await Task.WhenAll(tasks).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                    ret = (arr != null &amp;&amp; arr.All(n =&gt; n == <span class="keyword">true</span>)); <span class="comment">// true if all succeeded</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <span class="keywordflow">catch</span> (<a class="code" href="class_ac_utils_1_1_ac_utils_exception.html">AcUtilsException</a> ecx)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_debug.html">AcDebug</a>.<a class="code" href="class_ac_utils_1_1_ac_debug.html#a71e088f7b33d0873e1b1bca7443faa72">Log</a>($<span class="stringliteral">&quot;AcUtilsException caught and logged in AcDepots.initAsync{Environment.NewLine}{ecx.Message}&quot;</span>);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <span class="keywordflow">catch</span> (Exception ecx)</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_debug.html">AcDebug</a>.<a class="code" href="class_ac_utils_1_1_ac_debug.html#a71e088f7b33d0873e1b1bca7443faa72">Log</a>($<span class="stringliteral">&quot;Exception caught and logged in AcDepots.initAsync{Environment.NewLine}{ecx.Message}&quot;</span>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="preprocessor">        #pragma warning disable 0642</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div>
<div class="line"><a name="l00821"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depots.html#af2277a7229939ef2a49aa04de319b886">  821</a></span>&#160;        <span class="keyword">public</span> async Task&lt;string&gt; <a class="code" href="class_ac_utils_1_1_ac_depots.html#af2277a7229939ef2a49aa04de319b886">canViewAsync</a>(<a class="code" href="class_ac_utils_1_1_ac_user.html">AcUser</a> <a class="code" href="group__acenum.html#ggaa9826c7afff7ad23871825b95a0a631baee11cbb19052e40b07aac0ca060c23ee">user</a>)</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <span class="comment">// create permissions object as a singleton (thread safe)</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <span class="comment">// see &quot;C# Lazy Initialization &amp;&amp; Race-to-initialize&quot; http://stackoverflow.com/questions/11555755/c-sharp-lazy-initialization-race-to-initialize</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            await LazyInitializer.EnsureInitialized(ref _depotPermObj, ref _permInit, ref _permSync,</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                async () =&gt;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                    _permissions = <span class="keyword">new</span> <a class="code" href="class_ac_utils_1_1_ac_permissions.html">AcPermissions</a>(<a class="code" href="group__acenum.html#ga40cba942bbed1ac998223575478e4d6f">PermKind</a>.depot);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                    <span class="keywordflow">return</span> await _permissions.initAsync().ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                }).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <span class="keywordflow">if</span> (_depotPermObj.Result == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                <span class="keywordflow">return</span> null; <span class="comment">// initialization failure, check log file</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            <span class="comment">// get the membership list for the user (includes explicit and implicit membership)</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            SortedSet&lt;string&gt; members = user.<a class="code" href="class_ac_utils_1_1_ac_user.html#ad468a95f7c67ac9fc3e15b7e1e6f5dcb">Principal</a>.<a class="code" href="class_ac_utils_1_1_ac_principal.html#ab71381386e86212bfbea6ce8541ae9d9">Members</a>;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <span class="comment">// list that will contain the depots this user has permission to view</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            List&lt;string&gt; canView = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a> <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6fa6f13b876f224fb5d11c729c36a871540">depot</a> <span class="keywordflow">in</span> AsReadOnly())</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                <span class="keywordtype">bool</span> isInheritable = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                <span class="comment">// Any() returns true if the collection contains one or more items that satisfy the condition defined by the predicate</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                <span class="comment">// first, is an &#39;all&#39; or &#39;none&#39; permission explicitly set for this user on this depot?</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                <span class="keywordflow">if</span> (_permissions.Any(</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                    delegate(<a class="code" href="class_ac_utils_1_1_ac_permission.html">AcPermission</a> p)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                    {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                        <span class="keywordtype">bool</span> <a class="code" href="group__acenum.html#gga2149004df4de6f7f8763b1c46d4ade17aa181a603769c1f98ad927e7367c7aa51">all</a> = (p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a63b9a3e4134a3793234a85cd0aec7d8f">Type</a> == <a class="code" href="group__acenum.html#ga2a1036c3712685128ec5081a275d4b92">PermType</a>.user &amp;&amp; p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a8f51b8d78115a3f45c8cb78f3f210055">Rights</a> == <a class="code" href="group__acenum.html#ga9a4e48a1230244e13c54b3b2be79b893">PermRights</a>.all &amp;&amp;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                            String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a437284a83fd4b4e5f1868b2787e88557">AppliesTo</a>, <a class="code" href="group__acenum.html#ggaa9826c7afff7ad23871825b95a0a631baee11cbb19052e40b07aac0ca060c23ee">user</a>.Principal.Name) &amp;&amp; String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#af5349414285f2a97d7c22e3e33491678">Name</a>, depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>));</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                        <span class="keywordflow">if</span> (all)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                            isInheritable = (p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#aeda18064f0f6234bb60c4c862aa45512">Inheritable</a> == <span class="keyword">true</span> &amp;&amp; p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a63b9a3e4134a3793234a85cd0aec7d8f">Type</a> == <a class="code" href="group__acenum.html#ga2a1036c3712685128ec5081a275d4b92">PermType</a>.user &amp;&amp; p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a8f51b8d78115a3f45c8cb78f3f210055">Rights</a> == <a class="code" href="group__acenum.html#ga9a4e48a1230244e13c54b3b2be79b893">PermRights</a>.all &amp;&amp;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                                String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a437284a83fd4b4e5f1868b2787e88557">AppliesTo</a>, <a class="code" href="group__acenum.html#ggaa9826c7afff7ad23871825b95a0a631baee11cbb19052e40b07aac0ca060c23ee">user</a>.Principal.Name) &amp;&amp; String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#af5349414285f2a97d7c22e3e33491678">Name</a>, depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>));</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="group__acenum.html#gga2149004df4de6f7f8763b1c46d4ade17aa181a603769c1f98ad927e7367c7aa51">all</a>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                    }))</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                    <span class="keywordtype">string</span> msg = String.Format(<span class="stringliteral">&quot;{0}{1}&quot;</span>, depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>, isInheritable ? <span class="stringliteral">&quot;+&quot;</span> : String.Empty);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                    canView.Add(msg);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_permissions.Any(</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                    delegate(<a class="code" href="class_ac_utils_1_1_ac_permission.html">AcPermission</a> p)</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                    {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                        <span class="keywordflow">return</span> (p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a63b9a3e4134a3793234a85cd0aec7d8f">Type</a> == <a class="code" href="group__acenum.html#ga2a1036c3712685128ec5081a275d4b92">PermType</a>.user &amp;&amp; p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a8f51b8d78115a3f45c8cb78f3f210055">Rights</a> == <a class="code" href="group__acenum.html#ga9a4e48a1230244e13c54b3b2be79b893">PermRights</a>.none &amp;&amp;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                            String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a437284a83fd4b4e5f1868b2787e88557">AppliesTo</a>, <a class="code" href="group__acenum.html#ggaa9826c7afff7ad23871825b95a0a631baee11cbb19052e40b07aac0ca060c23ee">user</a>.Principal.Name) &amp;&amp; String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#af5349414285f2a97d7c22e3e33491678">Name</a>, depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>));</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                    }))</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                    ; <span class="comment">// user does not have permission to this depot</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                }</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                <span class="keywordflow">else</span> <span class="comment">// check permissions based on user&#39;s group memberships</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                    <span class="keywordtype">bool</span> <a class="code" href="group__acenum.html#gga2149004df4de6f7f8763b1c46d4ade17aa181a603769c1f98ad927e7367c7aa51">all</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                    <span class="keywordtype">bool</span> <a class="code" href="group__acenum.html#ggaa9826c7afff7ad23871825b95a0a631ba334c4a4c42fdb79d7ebc3e73b517e6f8">none</a> = _permissions.Any(</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                        delegate(<a class="code" href="class_ac_utils_1_1_ac_permission.html">AcPermission</a> p)</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                        {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                            <span class="keywordflow">return</span> (String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#af5349414285f2a97d7c22e3e33491678">Name</a>, depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>) &amp;&amp; p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a8f51b8d78115a3f45c8cb78f3f210055">Rights</a> == <a class="code" href="group__acenum.html#ga9a4e48a1230244e13c54b3b2be79b893">PermRights</a>.none &amp;&amp;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                                p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a63b9a3e4134a3793234a85cd0aec7d8f">Type</a> == <a class="code" href="group__acenum.html#ga2a1036c3712685128ec5081a275d4b92">PermType</a>.group &amp;&amp; members.Any(</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                                    delegate(<span class="keywordtype">string</span> m) { <span class="keywordflow">return</span> String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a437284a83fd4b4e5f1868b2787e88557">AppliesTo</a>, m); }));</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                        });</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                    <span class="comment">// by default everyone has access unless there&#39;s a &quot;none&quot; with no &quot;all&quot; override</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                    <span class="keywordflow">if</span> (none)</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                    {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                        all = _permissions.Any(</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                            delegate(<a class="code" href="class_ac_utils_1_1_ac_permission.html">AcPermission</a> p)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                            {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                                <span class="keywordflow">return</span> (String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#af5349414285f2a97d7c22e3e33491678">Name</a>, depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>) &amp;&amp; p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a8f51b8d78115a3f45c8cb78f3f210055">Rights</a> == <a class="code" href="group__acenum.html#ga9a4e48a1230244e13c54b3b2be79b893">PermRights</a>.all &amp;&amp;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                                    p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a63b9a3e4134a3793234a85cd0aec7d8f">Type</a> == <a class="code" href="group__acenum.html#ga2a1036c3712685128ec5081a275d4b92">PermType</a>.group &amp;&amp; members.Any(</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                                        delegate(<span class="keywordtype">string</span> m) { <span class="keywordflow">return</span> String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a437284a83fd4b4e5f1868b2787e88557">AppliesTo</a>, m); }));</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                            });</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                    }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                    <span class="keywordflow">if</span> (none &amp;&amp; !all)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                        ; <span class="comment">// user does not have permission to this depot</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                    <span class="keywordflow">else</span> <span class="comment">// no permission(s) set or an &#39;all&#39; that overrides one or more &#39;none&#39; permissions</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                    {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                        isInheritable = _permissions.Any(</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                            delegate(<a class="code" href="class_ac_utils_1_1_ac_permission.html">AcPermission</a> p)</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                            {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                                <span class="keywordflow">return</span> (p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#aeda18064f0f6234bb60c4c862aa45512">Inheritable</a> == <span class="keyword">true</span> &amp;&amp; String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#af5349414285f2a97d7c22e3e33491678">Name</a>, depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>) &amp;&amp; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                                    p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a63b9a3e4134a3793234a85cd0aec7d8f">Type</a> == <a class="code" href="group__acenum.html#ga2a1036c3712685128ec5081a275d4b92">PermType</a>.group &amp;&amp; members.Any(</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                                    delegate(<span class="keywordtype">string</span> m) { <span class="keywordflow">return</span> String.Equals(p.<a class="code" href="class_ac_utils_1_1_ac_permission.html#a437284a83fd4b4e5f1868b2787e88557">AppliesTo</a>, m); }));</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                            });</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                        <span class="keywordtype">string</span> msg = String.Format(<span class="stringliteral">&quot;{0}{1}&quot;</span>, depot.<a class="code" href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">Name</a>, isInheritable ? <span class="stringliteral">&quot;+&quot;</span> : String.Empty);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                        canView.Add(msg);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                    }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                }</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            IEnumerable&lt;string&gt; e = canView.OrderBy(n =&gt; n);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <span class="keywordtype">string</span> depots = String.Join(<span class="stringliteral">&quot;, &quot;</span>, e);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <span class="keywordflow">return</span> depots;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div>
<div class="line"><a name="l00919"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depots.html#ab2e5d8ba1c0639a497f65e49a602c39e">  919</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a> <a class="code" href="class_ac_utils_1_1_ac_depots.html#ab2e5d8ba1c0639a497f65e49a602c39e">getDepot</a>(<span class="keywordtype">string</span> name)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            <span class="keywordflow">return</span> this.SingleOrDefault(n =&gt; String.Equals(n.Name, name));</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00929"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depots.html#a97df9bc619633629007b24cf57bd0bee">  929</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a> <a class="code" href="class_ac_utils_1_1_ac_depots.html#a97df9bc619633629007b24cf57bd0bee">getDepot</a>(<span class="keywordtype">int</span> ID)</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            <span class="keywordflow">return</span> this.SingleOrDefault(n =&gt; n.ID == ID);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div>
<div class="line"><a name="l00939"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depots.html#a369a9a8306939aee6aa2e69919e6c3a0">  939</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a> <a class="code" href="class_ac_utils_1_1_ac_depots.html#a369a9a8306939aee6aa2e69919e6c3a0">getDepotForStream</a>(<span class="keywordtype">string</span> name)</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            <a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a> depot = null;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a> d <span class="keywordflow">in</span> AsReadOnly())</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                IEnumerable&lt;AcStream&gt; e = d.<a class="code" href="class_ac_utils_1_1_ac_depot.html#ab8a490d7d294fa7c5b75c6942761e07d">Streams</a>.Where(n =&gt; String.Equals(n.Name, name));</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> s = e.SingleOrDefault();</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                <span class="keywordflow">if</span> (s != null) <span class="comment">// if found</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                    depot = d;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6fa6f13b876f224fb5d11c729c36a871540">depot</a>;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno"><a class="line" href="class_ac_utils_1_1_ac_depots.html#a78212d9ae76ed027e1fb2c853853899f">  961</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> <a class="code" href="class_ac_utils_1_1_ac_depots.html#a78212d9ae76ed027e1fb2c853853899f">getStream</a>(<span class="keywordtype">string</span> name)</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b">stream</a> = null;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_ac_utils_1_1_ac_depot.html">AcDepot</a> d <span class="keywordflow">in</span> AsReadOnly())</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                IEnumerable&lt;AcStream&gt; e = d.<a class="code" href="class_ac_utils_1_1_ac_depot.html#ab8a490d7d294fa7c5b75c6942761e07d">Streams</a>.Where(n =&gt; String.Equals(n.Name, name));</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                <a class="code" href="class_ac_utils_1_1_ac_stream.html">AcStream</a> s = e.SingleOrDefault();</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                <span class="keywordflow">if</span> (s != null)</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                    <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b">stream</a> = s;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b">stream</a>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;}</div>
<div class="ttc" id="class_ac_utils_1_1_ac_permission_html_af5349414285f2a97d7c22e3e33491678"><div class="ttname"><a href="class_ac_utils_1_1_ac_permission.html#af5349414285f2a97d7c22e3e33491678">AcUtils.AcPermission.Name</a></div><div class="ttdeci">string Name</div><div class="ttdoc">Name of the depot or stream this permission applies to. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_permissions_8cs_source.html#l00200">AcPermissions.cs:200</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depots_html_ab2e5d8ba1c0639a497f65e49a602c39e"><div class="ttname"><a href="class_ac_utils_1_1_ac_depots.html#ab2e5d8ba1c0639a497f65e49a602c39e">AcUtils.AcDepots.getDepot</a></div><div class="ttdeci">AcDepot getDepot(string name)</div><div class="ttdoc">Get the AcDepot object for depot name. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00919">AcDepots.cs:919</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_a77cff1bf98ddb52e03de16761862e7dc"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#a77cff1bf98ddb52e03de16761862e7dc">AcUtils.AcDepot.Slice</a></div><div class="ttdeci">int Slice</div><div class="ttdoc">Depot&#39;s slice number. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00260">AcDepots.cs:260</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_user_html_ad468a95f7c67ac9fc3e15b7e1e6f5dcb"><div class="ttname"><a href="class_ac_utils_1_1_ac_user.html#ad468a95f7c67ac9fc3e15b7e1e6f5dcb">AcUtils.AcUser.Principal</a></div><div class="ttdeci">AcPrincipal Principal</div><div class="ttdoc">AccuRev principal attributes name, ID, and status (active or inactive), and optionally their group me...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_users_8cs_source.html#l00157">AcUsers.cs:157</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_result_html"><div class="ttname"><a href="class_ac_utils_1_1_ac_result.html">AcUtils.AcResult</a></div><div class="ttdoc">AccuRev program return value and command result. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_command_8cs_source.html#l00029">AcCommand.cs:29</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_stream_html_a88ca51eaf71bd060c1477d96c5b54afc"><div class="ttname"><a href="class_ac_utils_1_1_ac_stream.html#a88ca51eaf71bd060c1477d96c5b54afc">AcUtils.AcStream.BasisID</a></div><div class="ttdeci">int BasisID</div><div class="ttdoc">Basis stream ID number. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_streams_8cs_source.html#l00206">AcStreams.cs:206</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_ac66b547b57c63da9b32e90ff8f9f2018"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#ac66b547b57c63da9b32e90ff8f9f2018">AcUtils.AcDepot.AcDepot</a></div><div class="ttdeci">AcDepot(bool dynamicOnly, bool includeHidden)</div><div class="ttdoc">Constructor used during AcDepots list construction. It is called internally and not by user code...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00073">AcDepots.cs:73</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_streams_html_af7282977525827980a4ef540514d3176"><div class="ttname"><a href="class_ac_utils_1_1_ac_streams.html#af7282977525827980a4ef540514d3176">AcUtils.AcStreams.initAsync</a></div><div class="ttdeci">async Task&lt; bool &gt; initAsync(AcDepot depot, string listfile=null)</div><div class="ttdoc">Populate this container with AcStream objects as per constructor parameters. AcStream objects are ins...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_streams_8cs_source.html#l00438">AcStreams.cs:438</a></div></div>
<div class="ttc" id="group__acenum_html_ga9a4e48a1230244e13c54b3b2be79b893"><div class="ttname"><a href="group__acenum.html#ga9a4e48a1230244e13c54b3b2be79b893">AcUtils.PermRights</a></div><div class="ttdeci">PermRights</div><div class="ttdoc">Whether permission rights to Name in AppliesTo is all or none. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_permissions_8cs_source.html#l00047">AcPermissions.cs:47</a></div></div>
<div class="ttc" id="namespace_ac_utils_html"><div class="ttname"><a href="namespace_ac_utils.html">AcUtils</a></div><div class="ttdef"><b>Definition:</b> <a href="_ac_command_8cs_source.html#l00023">AcCommand.cs:23</a></div></div>
<div class="ttc" id="group__acenum_html_gad7d7bdcb365077a1537c1f62f262b678"><div class="ttname"><a href="group__acenum.html#gad7d7bdcb365077a1537c1f62f262b678">AcUtils.CaseSensitivity</a></div><div class="ttdeci">CaseSensitivity</div><div class="ttdoc">Indicates whether the depot is case sensitive or insensitive (defined when the depot is created)...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00033">AcDepots.cs:33</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depots_html_a97df9bc619633629007b24cf57bd0bee"><div class="ttname"><a href="class_ac_utils_1_1_ac_depots.html#a97df9bc619633629007b24cf57bd0bee">AcUtils.AcDepots.getDepot</a></div><div class="ttdeci">AcDepot getDepot(int ID)</div><div class="ttdoc">Get the AcDepot object for depot ID number. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00929">AcDepots.cs:929</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_depots_collection_html"><div class="ttname"><a href="class_ac_utils_1_1_depots_collection.html">AcUtils.DepotsCollection</a></div><div class="ttdoc">The list of AccuRev depots from <prog_name>.exe.config. </div><div class="ttdef"><b>Definition:</b> <a href="_depots_collection_8cs_source.html#l00048">DepotsCollection.cs:48</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_ab0a806c01df4c42a83a65fbbb5a4e6e9"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#ab0a806c01df4c42a83a65fbbb5a4e6e9">AcUtils.AcDepot.getStream</a></div><div class="ttdeci">AcStream getStream(int ID)</div><div class="ttdoc">Get the AcStream object with stream ID number. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00316">AcDepots.cs:316</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_user_html"><div class="ttname"><a href="class_ac_utils_1_1_ac_user.html">AcUtils.AcUser</a></div><div class="ttdoc">A user&#39;s AccuRev principal attributes name, ID, and status (active or inactive). In addition...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_users_8cs_source.html#l00037">AcUsers.cs:37</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depots_html_af2277a7229939ef2a49aa04de319b886"><div class="ttname"><a href="class_ac_utils_1_1_ac_depots.html#af2277a7229939ef2a49aa04de319b886">AcUtils.AcDepots.canViewAsync</a></div><div class="ttdeci">async Task&lt; string &gt; canViewAsync(AcUser user)</div><div class="ttdoc">Get the list of depots user has permission to view based on their principal name and group membership...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00821">AcDepots.cs:821</a></div></div>
<div class="ttc" id="namespace_ac_utils_html_ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b"><div class="ttname"><a href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6faf7b44cfafd5c52223d5498196c8a2e7b">AcUtils.stream</a></div><div class="ttdeci">stream</div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_ab8a490d7d294fa7c5b75c6942761e07d"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#ab8a490d7d294fa7c5b75c6942761e07d">AcUtils.AcDepot.Streams</a></div><div class="ttdeci">IEnumerable&lt; AcStream &gt; Streams</div><div class="ttdoc">The list of streams in this depot. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00287">AcDepots.cs:287</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_depot_element_html"><div class="ttname"><a href="class_ac_utils_1_1_depot_element.html">AcUtils.DepotElement</a></div><div class="ttdoc">An AccuRev depot from the Depots section in <prog_name>.exe.config. </div><div class="ttdef"><b>Definition:</b> <a href="_depot_element_8cs_source.html#l00025">DepotElement.cs:25</a></div></div>
<div class="ttc" id="group__acenum_html_gga2149004df4de6f7f8763b1c46d4ade17aa181a603769c1f98ad927e7367c7aa51"><div class="ttname"><a href="group__acenum.html#gga2149004df4de6f7f8763b1c46d4ade17aa181a603769c1f98ad927e7367c7aa51">AcUtils.all</a></div><div class="ttdeci">all</div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_a92081ed2e281370ec2b7d7a8fa886060"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#a92081ed2e281370ec2b7d7a8fa886060">AcUtils.AcDepot.getChildrenAsync</a></div><div class="ttdeci">async Task&lt; Tuple&lt; bool?, IList&lt; AcStream &gt; &gt; &gt; getChildrenAsync(AcStream stream, bool includeWSpaces=false)</div><div class="ttdoc">Get the list of child streams that have stream as their immediate parent (basis) stream. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00440">AcDepots.cs:440</a></div></div>
<div class="ttc" id="group__acenum_html_ggad7d7bdcb365077a1537c1f62f262b678a98fe7b114581ad03606cee6e8c1e2fa8"><div class="ttname"><a href="group__acenum.html#ggad7d7bdcb365077a1537c1f62f262b678a98fe7b114581ad03606cee6e8c1e2fa8">AcUtils.insensitive</a></div><div class="ttdeci">insensitive</div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depots_html_aefd78501e6a91238cdc7274c6aa985d5"><div class="ttname"><a href="class_ac_utils_1_1_ac_depots.html#aefd78501e6a91238cdc7274c6aa985d5">AcUtils.AcDepots.initAsync</a></div><div class="ttdeci">async Task&lt; bool &gt; initAsync(DepotsCollection depotsCol=null, IProgress&lt; int &gt; progress=null)</div><div class="ttdoc">Populate this container with AcDepot objects as per constructor parameters. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00750">AcDepots.cs:750</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html">AcUtils.AcDepot</a></div><div class="ttdoc">A depot object that defines the attributes of an AccuRev depot. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00049">AcDepots.cs:49</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_permission_html"><div class="ttname"><a href="class_ac_utils_1_1_ac_permission.html">AcUtils.AcPermission</a></div><div class="ttdoc">A permission object that defines the attributes of an AccuRev access control list (ACL) entry...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_permissions_8cs_source.html#l00078">AcPermissions.cs:78</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_a1b7edc65ccd1ad8487e64e56568f5219"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#a1b7edc65ccd1ad8487e64e56568f5219">AcUtils.AcDepot.getHierarchyAsync</a></div><div class="ttdeci">async Task&lt; MultiValueDictionary&lt; int, int &gt; &gt; getHierarchyAsync(bool includeWSpaces=false)</div><div class="ttdoc">Get the depot&#39;s stream and workspace (optional) hierarchy relationship data from AccuRev. This method is called internally and not by user code. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00485">AcDepots.cs:485</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_stream_html_ad016e45ed7fd9b39301a9885d2f37920"><div class="ttname"><a href="class_ac_utils_1_1_ac_stream.html#ad016e45ed7fd9b39301a9885d2f37920">AcUtils.AcStream.Name</a></div><div class="ttdeci">string Name</div><div class="ttdoc">Stream name. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_streams_8cs_source.html#l00179">AcStreams.cs:179</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_ac95dbd9ca47697160d2136639bc9bf76"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#ac95dbd9ca47697160d2136639bc9bf76">AcUtils.AcDepot.forStreamAndAllChildrenAsync</a></div><div class="ttdeci">async Task&lt; bool &gt; forStreamAndAllChildrenAsync(AcStream stream, Action&lt; AcStream &gt; cb, bool includeWSpaces=false)</div><div class="ttdoc">Run the specified action cb for stream and all child streams in its hierarchy. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00398">AcDepots.cs:398</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_ab6e664e58d0706313045a9948534e7f4"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#ab6e664e58d0706313045a9948534e7f4">AcUtils.AcDepot.initAsync</a></div><div class="ttdeci">async Task&lt; bool &gt; initAsync()</div><div class="ttdoc">Initialize this AcDepot object with data from AccuRev as per constructor parameter&#39;s depot name or ID...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00114">AcDepots.cs:114</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depots_html_a047429104b79c593e9880442ffe6863b"><div class="ttname"><a href="class_ac_utils_1_1_ac_depots.html#a047429104b79c593e9880442ffe6863b">AcUtils.AcDepots.AcDepots</a></div><div class="ttdeci">AcDepots(bool dynamicOnly=false, bool includeHidden=false)</div><div class="ttdoc">A container of AcDepot objects that define AccuRev depots in the repository. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00688">AcDepots.cs:688</a></div></div>
<div class="ttc" id="group__acenum_html_ga40cba942bbed1ac998223575478e4d6f"><div class="ttname"><a href="group__acenum.html#ga40cba942bbed1ac998223575478e4d6f">AcUtils.PermKind</a></div><div class="ttdeci">PermKind</div><div class="ttdoc">Whether permissions pertain to depots or streams. Set when the permission is created by the setacl co...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_permissions_8cs_source.html#l00061">AcPermissions.cs:61</a></div></div>
<div class="ttc" id="namespace_ac_utils_html_ga40cba942bbed1ac998223575478e4d6fa6f13b876f224fb5d11c729c36a871540"><div class="ttname"><a href="namespace_ac_utils.html#ga40cba942bbed1ac998223575478e4d6fa6f13b876f224fb5d11c729c36a871540">AcUtils.depot</a></div><div class="ttdeci">depot</div></div>
<div class="ttc" id="group__acenum_html_ggad7d7bdcb365077a1537c1f62f262b678a7bdc8a923ea34af94c5d36604d0fb3dc"><div class="ttname"><a href="group__acenum.html#ggad7d7bdcb365077a1537c1f62f262b678a7bdc8a923ea34af94c5d36604d0fb3dc">AcUtils.sensitive</a></div><div class="ttdeci">sensitive</div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_permission_html_a437284a83fd4b4e5f1868b2787e88557"><div class="ttname"><a href="class_ac_utils_1_1_ac_permission.html#a437284a83fd4b4e5f1868b2787e88557">AcUtils.AcPermission.AppliesTo</a></div><div class="ttdeci">string AppliesTo</div><div class="ttdoc">Principal name of the group or user this permission applies to or one of the built-in types anyuser o...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_permissions_8cs_source.html#l00210">AcPermissions.cs:210</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_ad380aeddc1c99febe13e3194e78c00b8"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#ad380aeddc1c99febe13e3194e78c00b8">AcUtils.AcDepot.ID</a></div><div class="ttdeci">int ID</div><div class="ttdoc">Depot ID number. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00242">AcDepots.cs:242</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_stream_html"><div class="ttname"><a href="class_ac_utils_1_1_ac_stream.html">AcUtils.AcStream</a></div><div class="ttdoc">A stream object that defines the attributes of an AccuRev stream. AcStream objects are instantiated d...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_streams_8cs_source.html#l00074">AcStreams.cs:74</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_result_html_a333607bff557c608174c541a841105a8"><div class="ttname"><a href="class_ac_utils_1_1_ac_result.html#a333607bff557c608174c541a841105a8">AcUtils.AcResult.CmdResult</a></div><div class="ttdeci">string CmdResult</div><div class="ttdoc">The command result (usually XML) emitted by AccuRev. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_command_8cs_source.html#l00070">AcCommand.cs:70</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_result_html_afddbfb131e5698b41c9164685a99125b"><div class="ttname"><a href="class_ac_utils_1_1_ac_result.html#afddbfb131e5698b41c9164685a99125b">AcUtils.AcResult.RetVal</a></div><div class="ttdeci">int RetVal</div><div class="ttdoc">The AccuRev program return value for the command, otherwise minus one (-1) on error. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_command_8cs_source.html#l00061">AcCommand.cs:61</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_debug_html_a71e088f7b33d0873e1b1bca7443faa72"><div class="ttname"><a href="class_ac_utils_1_1_ac_debug.html#a71e088f7b33d0873e1b1bca7443faa72">AcUtils.AcDebug.Log</a></div><div class="ttdeci">static void Log(string message, bool formatting=true)</div><div class="ttdoc">Write the message text to STDOUT, to weekly log files located in %LOCALAPPDATA%\AcTools\Logs, and to trigger.log in the AccuRev server&#39;s ..storage\site_slice\logs folder in the case of triggers. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_debug_8cs_source.html#l00378">AcDebug.cs:378</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depots_html_a78212d9ae76ed027e1fb2c853853899f"><div class="ttname"><a href="class_ac_utils_1_1_ac_depots.html#a78212d9ae76ed027e1fb2c853853899f">AcUtils.AcDepots.getStream</a></div><div class="ttdeci">AcStream getStream(string name)</div><div class="ttdoc">Get the AcStream object for stream name. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00961">AcDepots.cs:961</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_a454fe652331f9e7958a9f9af8c867a60"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#a454fe652331f9e7958a9f9af8c867a60">AcUtils.AcDepot.Name</a></div><div class="ttdeci">string Name</div><div class="ttdoc">Depot name. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00251">AcDepots.cs:251</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_stream_html_a846da160261ffc6879547453dbde2a76"><div class="ttname"><a href="class_ac_utils_1_1_ac_stream.html#a846da160261ffc6879547453dbde2a76">AcUtils.AcStream.Type</a></div><div class="ttdeci">StreamType Type</div><div class="ttdoc">The kind of stream: unknown, normal, dynamic, regular, workspace, snapshot, passthru, passthrough, gated or staging. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_streams_8cs_source.html#l00235">AcStreams.cs:235</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_afb7282050197177270a60a748b38603a"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#afb7282050197177270a60a748b38603a">AcUtils.AcDepot.getStream</a></div><div class="ttdeci">AcStream getStream(string name)</div><div class="ttdoc">Get the AcStream object for stream name. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00296">AcDepots.cs:296</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_a12486c4a14141fc2edeec47d28dcc297"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#a12486c4a14141fc2edeec47d28dcc297">AcUtils.AcDepot.AcDepot</a></div><div class="ttdeci">AcDepot(string name, bool dynamicOnly=false, bool includeHidden=false)</div><div class="ttdoc">Constructor for specifying the depot name. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00086">AcDepots.cs:86</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_aec3195727c05a020fe600be388720ea0"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#aec3195727c05a020fe600be388720ea0">AcUtils.AcDepot.Equals</a></div><div class="ttdeci">override bool Equals(object other)</div><div class="ttdoc">Overridden to determine equality. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00183">AcDepots.cs:183</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_a5b7875bed1ad4626eabb5595016636e7"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#a5b7875bed1ad4626eabb5595016636e7">AcUtils.AcDepot.getBasis</a></div><div class="ttdeci">AcStream getBasis(int ID)</div><div class="ttdoc">Get the basis (parent) stream for stream ID number. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00359">AcDepots.cs:359</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_utils_exception_html"><div class="ttname"><a href="class_ac_utils_1_1_ac_utils_exception.html">AcUtils.AcUtilsException</a></div><div class="ttdoc">Exception thrown when an AccuRev command fails. The AccuRev program return value is zero (0) on succe...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_utils_exception_8cs_source.html#l00034">AcUtilsException.cs:34</a></div></div>
<div class="ttc" id="group__acenum_html_ga0a9d168d367dad9bab253eafa49aae77"><div class="ttname"><a href="group__acenum.html#ga0a9d168d367dad9bab253eafa49aae77">AcUtils.StreamType</a></div><div class="ttdeci">StreamType</div><div class="ttdoc">The type of stream. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_streams_8cs_source.html#l00033">AcStreams.cs:33</a></div></div>
<div class="ttc" id="group__acenum_html_ggaa9826c7afff7ad23871825b95a0a631baee11cbb19052e40b07aac0ca060c23ee"><div class="ttname"><a href="group__acenum.html#ggaa9826c7afff7ad23871825b95a0a631baee11cbb19052e40b07aac0ca060c23ee">AcUtils.user</a></div><div class="ttdeci">user</div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_ae837dfeaa76f2aa4f3f75b79681c7c30"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#ae837dfeaa76f2aa4f3f75b79681c7c30">AcUtils.AcDepot.getBasis</a></div><div class="ttdeci">AcStream getBasis(string name)</div><div class="ttdoc">Get the basis (parent) stream for stream name. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00339">AcDepots.cs:339</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_stream_html_adaa63817bd2212ac1657c78452e3b897"><div class="ttname"><a href="class_ac_utils_1_1_ac_stream.html#adaa63817bd2212ac1657c78452e3b897">AcUtils.AcStream.ID</a></div><div class="ttdeci">int ID</div><div class="ttdoc">Stream ID number. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_streams_8cs_source.html#l00188">AcStreams.cs:188</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_command_html"><div class="ttname"><a href="class_ac_utils_1_1_ac_command.html">AcUtils.AcCommand</a></div><div class="ttdoc">AccuRev command processing. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_command_8cs_source.html#l00138">AcCommand.cs:138</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_command_html_aec181b83848526414ef5b5cbcc336421"><div class="ttname"><a href="class_ac_utils_1_1_ac_command.html#aec181b83848526414ef5b5cbcc336421">AcUtils.AcCommand.runAsync</a></div><div class="ttdeci">static async Task&lt; AcResult &gt; runAsync(string command, ICmdValidate validator=null)</div><div class="ttdoc">Run the AccuRev command asynchronously with non-blocking I/O.</div><div class="ttdef"><b>Definition:</b> <a href="_ac_command_8cs_source.html#l00184">AcCommand.cs:184</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_a9faf6338d8993711bf05e5b0c73bb7f0"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#a9faf6338d8993711bf05e5b0c73bb7f0">AcUtils.AcDepot.CompareTo</a></div><div class="ttdeci">int CompareTo(AcDepot other)</div><div class="ttdoc">Generic IComparable implementation (default) for comparing AcDepot objects to sort by depot name...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00211">AcDepots.cs:211</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_a929107cbae2629f77df986d75626dbcf"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#a929107cbae2629f77df986d75626dbcf">AcUtils.AcDepot.AcDepot</a></div><div class="ttdeci">AcDepot(int id, bool dynamicOnly=false, bool includeHidden=false)</div><div class="ttdoc">Constructor for specifying the depot ID number. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00099">AcDepots.cs:99</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_debug_html"><div class="ttname"><a href="class_ac_utils_1_1_ac_debug.html">AcUtils.AcDebug</a></div><div class="ttdoc">Use to log and display error and general purpose text messages, and to save the XML param data sent b...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_debug_8cs_source.html#l00100">AcDebug.cs:100</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_adbc344620c33f17dfedacd62aff79fa8"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#adbc344620c33f17dfedacd62aff79fa8">AcUtils.AcDepot.GetHashCode</a></div><div class="ttdeci">override int GetHashCode()</div><div class="ttdoc">Override appropriate for type AcDepot. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00195">AcDepots.cs:195</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depots_html"><div class="ttname"><a href="class_ac_utils_1_1_ac_depots.html">AcUtils.AcDepots</a></div><div class="ttdoc">A container of AcDepot objects that define AccuRev depots in the repository. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00658">AcDepots.cs:658</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_ac4eaf2a4ae0072629a1d65c43e5cf15e"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#ac4eaf2a4ae0072629a1d65c43e5cf15e">AcUtils.AcDepot.listFile</a></div><div class="ttdeci">string listFile()</div><div class="ttdoc">When this file exists (created manually), it is used as the list-file to populate the depot with sele...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00561">AcDepots.cs:561</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depots_html_a369a9a8306939aee6aa2e69919e6c3a0"><div class="ttname"><a href="class_ac_utils_1_1_ac_depots.html#a369a9a8306939aee6aa2e69919e6c3a0">AcUtils.AcDepots.getDepotForStream</a></div><div class="ttdeci">AcDepot getDepotForStream(string name)</div><div class="ttdoc">Get the AcDepot object for stream name. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00939">AcDepots.cs:939</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_a9c5f16b549c939a2f69609e734b16279"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#a9c5f16b549c939a2f69609e734b16279">AcUtils.AcDepot.ExclusiveLocking</a></div><div class="ttdeci">bool ExclusiveLocking</div><div class="ttdoc">Whether or not all workspaces created for this depot use exclusive file locking. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00269">AcDepots.cs:269</a></div></div>
<div class="ttc" id="group__acenum_html_ggaa9826c7afff7ad23871825b95a0a631ba334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="group__acenum.html#ggaa9826c7afff7ad23871825b95a0a631ba334c4a4c42fdb79d7ebc3e73b517e6f8">AcUtils.none</a></div><div class="ttdeci">none</div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_permissions_html"><div class="ttname"><a href="class_ac_utils_1_1_ac_permissions.html">AcUtils.AcPermissions</a></div><div class="ttdoc">A container of AcPermission objects that define AccuRev access control list (ACL) entries...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_permissions_8cs_source.html#l00332">AcPermissions.cs:332</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_principal_html_ab71381386e86212bfbea6ce8541ae9d9"><div class="ttname"><a href="class_ac_utils_1_1_ac_principal.html#ab71381386e86212bfbea6ce8541ae9d9">AcUtils.AcPrincipal.Members</a></div><div class="ttdeci">SortedSet&lt; string &gt; Members</div><div class="ttdoc">The list of groups a user has membership in, or the list of principals (users and groups) in a group...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_principal_8cs_source.html#l00177">AcPrincipal.cs:177</a></div></div>
<div class="ttc" id="group__acenum_html_ga2a1036c3712685128ec5081a275d4b92"><div class="ttname"><a href="group__acenum.html#ga2a1036c3712685128ec5081a275d4b92">AcUtils.PermType</a></div><div class="ttdeci">PermType</div><div class="ttdoc">Whether AppliesTo is the principal name for a group, user, or builtin type. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_permissions_8cs_source.html#l00031">AcPermissions.cs:31</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_streams_html"><div class="ttname"><a href="class_ac_utils_1_1_ac_streams.html">AcUtils.AcStreams</a></div><div class="ttdoc">A container of AcStream objects that define AccuRev streams. AcStream objects are instantiated during...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_streams_8cs_source.html#l00378">AcStreams.cs:378</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_a0bd129aac82e38a2d05a9d16da8ab259"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#a0bd129aac82e38a2d05a9d16da8ab259">AcUtils.AcDepot.ToString</a></div><div class="ttdeci">string ToString(string format, IFormatProvider provider)</div><div class="ttdoc">The ToString implementation. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00605">AcDepots.cs:605</a></div></div>
<div class="ttc" id="namespace_system_1_1_threading_html"><div class="ttname"><a href="namespace_system_1_1_threading.html">System.Threading</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_af0c833757fbeb79c6e8a5f9627f145ea"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#af0c833757fbeb79c6e8a5f9627f145ea">AcUtils.AcDepot.Equals</a></div><div class="ttdeci">bool Equals(AcDepot other)</div><div class="ttdoc">IEquatable implementation to determine the equality of instances of type AcDepot. Uses the depot ID n...</div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00172">AcDepots.cs:172</a></div></div>
<div class="ttc" id="group__acenum_html_gga3164dabd0d78a5482aea218fa9154669a1cb251ec0d568de6a929b520c4aed8d1"><div class="ttname"><a href="group__acenum.html#gga3164dabd0d78a5482aea218fa9154669a1cb251ec0d568de6a929b520c4aed8d1">AcUtils.text</a></div><div class="ttdeci">text</div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_depot_html_a530cc9e64207dd127e5c53441a814fe4"><div class="ttname"><a href="class_ac_utils_1_1_ac_depot.html#a530cc9e64207dd127e5c53441a814fe4">AcUtils.AcDepot.Case</a></div><div class="ttdeci">CaseSensitivity Case</div><div class="ttdoc">Whether the depot is case sensitive or insensitive. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_depots_8cs_source.html#l00278">AcDepots.cs:278</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_permission_html_aeda18064f0f6234bb60c4c862aa45512"><div class="ttname"><a href="class_ac_utils_1_1_ac_permission.html#aeda18064f0f6234bb60c4c862aa45512">AcUtils.AcPermission.Inheritable</a></div><div class="ttdeci">bool Inheritable</div><div class="ttdoc">For depots, when true permission applies to the depot and its entire stream hierarchy, when false permission applies only to AccuWork issues in the depot and not its version-controlled elements.  For streams, when true permission applies to the stream and its entire subhierarchy, when false permission applies only to the stream. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_permissions_8cs_source.html#l00243">AcPermissions.cs:243</a></div></div>
<div class="ttc" id="group__acenum_html_gga2149004df4de6f7f8763b1c46d4ade17ad98a07f84921b24ee30f86fd8cd85c3c"><div class="ttname"><a href="group__acenum.html#gga2149004df4de6f7f8763b1c46d4ade17ad98a07f84921b24ee30f86fd8cd85c3c">AcUtils.from</a></div><div class="ttdeci">from</div></div>
<div class="ttc" id="namespace_system_1_1_threading_1_1_tasks_html"><div class="ttname"><a href="namespace_system_1_1_threading_1_1_tasks.html">System.Threading.Tasks</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_permission_html_a63b9a3e4134a3793234a85cd0aec7d8f"><div class="ttname"><a href="class_ac_utils_1_1_ac_permission.html#a63b9a3e4134a3793234a85cd0aec7d8f">AcUtils.AcPermission.Type</a></div><div class="ttdeci">PermType Type</div><div class="ttdoc">Whether AppliesTo is the principal name for a group, user, or a builtin type. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_permissions_8cs_source.html#l00220">AcPermissions.cs:220</a></div></div>
<div class="ttc" id="class_ac_utils_1_1_ac_permission_html_a8f51b8d78115a3f45c8cb78f3f210055"><div class="ttname"><a href="class_ac_utils_1_1_ac_permission.html#a8f51b8d78115a3f45c8cb78f3f210055">AcUtils.AcPermission.Rights</a></div><div class="ttdeci">PermRights Rights</div><div class="ttdoc">Whether permission rights to Name in AppliesTo is all or none. </div><div class="ttdef"><b>Definition:</b> <a href="_ac_permissions_8cs_source.html#l00230">AcPermissions.cs:230</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 6 2018 09:39:18 for AcUtils by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
